@using FoodOrderingSite.PL.Model
@{
    Layout = "~/Layout/_MainLayout.cshtml";
}
@{
    var products = UserContext.GetInstance.Basket(int.Parse(User.Identity.Name));
}
<link href="~/Css/Index.css" rel="stylesheet" />


<div class="container" style="background-color:burlywood">
    <div class="row">
        <div class="col-md-4">
            <form method="post" action="~/Methods/MakeOrder.cshtml">
                <div class="form-group">
                    <label for="exampleInputEmail1">Имя</label>
                    <input type="text" class="form-control" name="Name" id="Name" required placeholder="Введите Ваше имя">
                </div>
                <div class="form-group">
                    <label for="exampleInputPassword1">Адрес</label>
                    <input type="text" class="form-control" name="Address" id="exampleInputPassword1" required placeholder="Адрес">
                </div>
                <div class="form-group">
                    <label for="exampleInputPassword1">Номер телефона</label>
                    <input type="text" class="form-control" name="Phone" id="exampleInputPassword1" required placeholder="Номер телефона">
                </div>
                <button type="submit" class="btn btn-primary">Подтвердить заказ</button>
            </form>
        </div>
        <div class="col-md-8">
            @foreach (var item in products)
            {
                <div class="product">
                    <div class="product_content">
                        <div><h3>@item.Name</h3></div>
                        <img class="product_img" src="@item.Image" />
                        <h5>@item.Сomposition</h5>
                        <h5 class="border bg-info">Стоимость: @item.Price руб.</h5>
                        <button type="button" class="btn btn-info add-btn" value="@item.Id" id="AddProduct">Убрать из корзины</button>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<script>
    $('.add-btn').click(function (e) {
      $.ajax({
      type: "POST",
          url: "Methods/AddProductToBasket",
          data: "id=" + this.value,
          success: function (count) {
              $("#basketCount").text(count);
      }});
    });
</script>
